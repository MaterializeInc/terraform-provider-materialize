---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "materialize_network_policy Resource - terraform-provider-materialize"
subcategory: ""
description: |-
  A network policy manages access to the system through IP-based rules.
---

# materialize_network_policy (Resource)

A network policy manages access to the system through IP-based rules.

## Example Usage

```terraform
resource "materialize_network_policy" "office_policy" {
  name = "office_access_policy"

  rule {
    name      = "minnesota"
    action    = "allow"
    direction = "ingress"
    address   = "2.3.4.5/32"
  }

  rule {
    name      = "new_york"
    action    = "allow"
    direction = "ingress"
    address   = "1.2.3.4/28"
  }

  comment = "Network policy for office locations"
}

# An initial `default` network policy will be created.
# This policy allows open access to the environment and can be altered by a `superuser`.
# Use the `ALTER SYSTEM SET network_policy TO 'office_access_policy'` command.
# Or the `materialize_system_parameter` resource to set the default network policy.
resource "materialize_system_parameter" "system_parameter" {
  name  = "network_policy"
  value = "office_access_policy"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the network policy.
- `rule` (Block Set, Min: 1, Max: 25) Rules for the network policy. (see [below for nested schema](#nestedblock--rule))

### Optional

- `comment` (String) Comment on an object in the database.
- `region` (String) The region to use for the resource connection. If not set, the default region is used.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--rule"></a>
### Nested Schema for `rule`

Required:

- `action` (String) The action to take for this rule. Currently only 'allow' is supported.
- `address` (String) The CIDR block the rule will be applied to.
- `direction` (String) The direction of traffic the rule applies to. Currently only 'ingress' is supported.
- `name` (String) The name of the rule.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Network policies can be imported using the `terraform import` command.
terraform import materialize_network_policy.example_network_policy <region>:<network_policy_id>

# The network_policy_id is the ID of the network policy.
# You can find it from the `mz_internal.mz_network_policy_rules` table in the materialize
# The region is the region where the database is located (e.g. aws/us-east-1)
```
